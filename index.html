<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ä¸­éŸ“å³æ™‚ç¿»è­¯ç·´ç¿’ï¼ˆå„ªåŒ–ç‰ˆï¼‰</title>
  <link rel="icon" href="icon.jpg">
  <style>
    /* ======== å…¨å±€ ======== */
    body {
      font-family: "Comic Neue", "Inter", "Segoe UI", Arial, sans-serif;
      background-color: #f3e0c7;
      background-image: url("1000004132");
      background-repeat: repeat;
      background-size: contain; /* èƒŒæ™¯è‡ªé©æ‡‰ */
      padding: 40px 20px;
      color: #222;
    }

    .box {
      position: relative;
      background-color: #ffffff;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      border: 3px dashed #facc15;
    }

    .bear {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.9;
    }

    .bear-left { top: -1rem; left: -1rem; }
    .bear-right { top: -1rem; right: -1rem; }
    .bottom-bear {
      position: absolute;
      bottom: -1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2.7rem;
    }

    h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      letter-spacing: 1px;
    }

    h2::before { content: "âœ¨ "; }

    input {
      width: 100%;
      padding: 0.75rem 1rem;
      margin-top: 0.5rem;
      font-size: 1rem;
      border: 2px solid #facc15;
      border-radius: 12px;
      background-color: #fffbeb;
    }

    input:focus {
      outline: none;
      border-color: #f59e0b;
      background-color: #ffffff;
    }

    .result {
      margin-top: 0.5rem;
      min-height: 1.5rem;
      font-size: 1rem;
      padding: 0.5rem 0.75rem;
      border-radius: 10px;
      background-color: #fef3c7;
      color: #78350f; /* WCAGå‹å–„é¡è‰² */
      line-height: 1.6;
    }

    .count {
      margin-top: 0.25rem;
      font-size: 0.8rem;
      color: #92400e;
    }

    .error {
      color: #b91c1c;
      background-color: #fee2e2;
    }

    hr {
      border: none;
      border-top: 2px dotted #fde68a;
      margin: 2rem 0;
    }

    .rules {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #78350f;
    }

    .rules ul { padding-left: 1.2rem; }

    button {
      margin-top: 0.5rem;
      padding: 0.4rem 1rem;
      font-size: 0.85rem;
      border-radius: 999px;
      border: 2px solid #facc15;
      background-color: #fef9c3;
      cursor: pointer;
    }

    button:hover { background-color: #fde68a; }

    #wordList {
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 12px;
      background-color: #fffbeb;
      border: 2px dashed #fde68a;
      font-size: 0.9rem;
      display: none;
      max-height: 30vh; /* éŸ¿æ‡‰å¼é«˜åº¦ */
      overflow: auto;
    }

    #wordList li {
      padding: 0.25rem 0;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    #wordList li:hover {
      transform: translateY(-3px);
      background-color: #fef3c7;
    }

    @media (max-width: 500px) {
      input { font-size: 0.9rem; padding: 0.5rem; }
      .result { font-size: 0.9rem; }
    }

  </style>
</head>
<body>

<div class="box">
  <div class="bear bear-left">ğŸ§¸</div>
  <div class="bear bear-right">ğŸ§¸</div>

  <h2>ğŸ§¸ ä¸­æ–‡ âœ éŸ“æ–‡ï¼ˆå³æ™‚ç¿»è­¯ï¼‰</h2>
  <input id="zhInput" type="text" placeholder="è«‹è¼¸å…¥ä¸­æ–‡" oninput="zhToKo()">
  <div id="zhResult" class="result"></div>
  <div id="zhCount" class="count"></div>

  <hr>

  <h2>ğŸ§¸ éŸ“æ–‡ âœ ä¸­æ–‡ï¼ˆå³æ™‚ç¿»è­¯ï¼‰</h2>
  <input id="koInput" type="text" placeholder="í•œêµ­ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" oninput="koToZh()">
  <div id="koResult" class="result"></div>
  <div id="koCount" class="count"></div>

  <div class="rules">
    <strong>ğŸ¾ ä½¿ç”¨è¦å‰‡ï¼š</strong>
    <ul>
      <li>ä¸Šæ–¹è¼¸å…¥å€åªèƒ½è¼¸å…¥ä¸­æ–‡</li>
      <li>ä¸‹æ–¹è¼¸å…¥å€åªèƒ½è¼¸å…¥éŸ“æ–‡</li>
      <li>è¼¸å…¥æ™‚æœƒå³æ™‚ç¿»è­¯ï¼Œä¸éœ€è¦æŒ‰æŒ‰éˆ•</li>
      <li>åƒ…æ”¯æ´å­—å…¸ä¸­å·²æœ‰çš„è©å½™</li>
    </ul>

    <hr>

    <strong>ğŸ“– å¯ç¿»è­¯å–®å­—æ¸…å–®ï¼š</strong><br>
    <button onclick="toggleList()">å±•é–‹ / æ”¶åˆ</button>
    <ul id="wordList"></ul>

    <div class="bottom-bear">ğŸ§¸</div>
  </div>
</div>

<script>
// ===============================
// 1. ä¸­éŸ“å°ç…§å­—å…¸ï¼ˆå…§å»ºï¼‰
// ===============================
console.log(dictionary["å¥½"]); // è¼¸å‡º: "ì¢‹ì•„ìš”"


// ===============================
// 0. å­—å…¸é è™•ç†ï¼ˆå»é‡ + é›™å‘ï¼‰
// ===============================

// ä½ çš„åŸå§‹ dictionaryï¼ˆ1000+ï¼‰æ”¾åœ¨é€™ä¹‹å‰
// const dictionary = { ... };

const zhToKoDict = {};
const koToZhDict = {};

// å»é‡ï¼šå¾Œå¯«è¦†è“‹å‰å¯«ï¼ˆJS æ¨™æº–è¡Œç‚ºï¼‰
for (const [zh, ko] of Object.entries(dictionary)) {
  zhToKoDict[zh] = ko;
  if (!koToZhDict[ko]) {
    koToZhDict[ko] = zh;
  }
}

// é•·è©å„ªå…ˆï¼ˆæ ¸å¿ƒé—œéµï¼‰
const zhKeys = Object.keys(zhToKoDict).sort((a, b) => b.length - a.length);
const koKeys = Object.keys(koToZhDict).sort((a, b) => b.length - a.length);

// ===============================
// 1. ä¸­æ–‡ â†’ éŸ“æ–‡
// ===============================
function zhToKo() {
  const input = document.getElementById("zhInput").value;
  const result = translate(input, zhKeys, zhToKoDict);

  document.getElementById("zhResult").textContent = result.text;
  document.getElementById("zhCount").textContent =
    `ç¿»åˆ° ${result.hit} è©ï½œæœªç¿» ${result.miss} è©ï½œå‘½ä¸­ç‡ ${result.rate}%`;
}

// ===============================
// 2. éŸ“æ–‡ â†’ ä¸­æ–‡
// ===============================
function koToZh() {
  const input = document.getElementById("koInput").value;
  const result = translate(input, koKeys, koToZhDict);

  document.getElementById("koResult").textContent = result.text;
  document.getElementById("koCount").textContent =
    `ç¿»åˆ° ${result.hit} è©ï½œæœªç¿» ${result.miss} è©ï½œå‘½ä¸­ç‡ ${result.rate}%`;
}

// ===============================
// 3. æ ¸å¿ƒç¿»è­¯å¼•æ“ï¼ˆå…±ç”¨ï¼‰
// ===============================
function translate(text, keys, dict) {
  if (!text.trim()) {
    return { text: "", hit: 0, miss: 0, rate: 0 };
  }

  let output = text;
  let hit = 0;

  for (const key of keys) {
    if (output.includes(key)) {
      output = output.split(key).join(` ${dict[key]} `);
      hit++;
    }
  }

  // æ¸…ç†å¤šé¤˜ç©ºç™½
  output = output.replace(/\s+/g, " ").trim();

  // ç²—ä¼°æœªç¿»è­¯æ•¸é‡
  const chars = [...text].filter(c =>
    dict === zhToKoDict
      ? /[\u4e00-\u9fff]/.test(c)
      : /[ê°€-í£]/.test(c)
  );

  const miss = Math.max(chars.length - hit, 0);
  const rate = Math.round((hit / (hit + miss || 1)) * 100);

  return { text: output, hit, miss, rate };
}

// ===============================
// 4. å–®å­—æ¸…å–®ï¼ˆå±•é–‹ / æ”¶åˆï¼‰
// ===============================
function toggleList() {
  const ul = document.getElementById("wordList");

  if (ul.innerHTML === "") {
    ul.innerHTML = Object.entries(zhToKoDict)
      .map(([zh, ko]) => `<li>${zh} â†’ ${ko}</li>`)
      .join("");
  }

  ul.style.display = ul.style.display === "none" ? "block" : "none";
}
</script>
</body>
</html>
